const express=require("express"),fs=require("fs");var path=require("path");const app=express(),json="./DuneQuiz.json",port=8080,prefix="/api/v1",server="http://localhost:";app.use(express.json());const quiz=(()=>{const e=fs.readFileSync(json,"utf8"),s=JSON.parse(e),n=[],o=[];return s.forEach((e=>{const s=e.question,t=e.options,i=e.answer;n.push({question:s,options:t}),o.push(i)})),{questions:n,answers:o}})();app.get("/",(function(e,s){s.sendFile(path.resolve("./clients/web/index.html"))})),app.get("/fonts/dune_rise",(function(e,s){s.sendFile(path.resolve("./clients/fonts/Dune-Rise/Dune_Rise.otf"))})),app.get(`${prefix}/quiz`,(function(e,s){s.json(quiz.questions)})),app.post(`${prefix}/quiz`,(function(e,s){const n=quiz.answers.length;let o=0;for(let s=0;s<n;s++)e.body[s]===quiz.answers[s]&&o++;const t=Math.floor(o/n*100),i=t>=80?"Distinction":t>60?"Merit":t>=40?"Pass":"Fail";s.json({mark:o,percentage:t,grade:i})})),app.listen(8080),console.log(""),console.log("Quiz App Haderach started on:"),console.log(`${server}8080`),console.log("");